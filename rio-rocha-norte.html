<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAPA DE CARGA CONTAMINANTE - Río Rocha</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        h1 { text-align: center; margin: 20px 0; }
        .controls {
            text-align: center;
            margin: 10px 0;
        }
        .controls button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ccc;
            background-color: #f4f4f4;
            margin: 0 5px;
            border-radius: 5px;
        }
        .controls button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        #mapid { 
            height: 80vh; 
            width: 90%; 
            margin: 2.5vh auto; 
            border: 1px solid #ccc; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
            position: relative;
        }
        
        /* Estilos para el indicador del norte */
        #north-arrow {
            position: absolute;
            top: 60px; /* Separado de los controles de zoom */
            left: 20px;
            z-index: 1000;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        #north-arrow .arrow {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid #333;
            margin: 0 auto 5px;
        }
    </style>
</head>
<body>

    <h1>MAPA DE CARGA CONTAMINANTE EN EL RÍO ROCHA</h1>

    <div class="controls">
        <div id="year-controls">
            <button id="btn2021" class="active">Gestión 2021</button>
            <button id="btn2023">Gestión 2023</button>
            <button id="btn2024">Gestión 2024</button>
        </div>
        <div id="month-controls" style="margin-top: 10px;">
            </div>
    </div>

    <div id="mapid">
        <div id="north-arrow">
            <div class="arrow"></div>
            N
        </div>
    </div>

    <script>
        // Paso 1: Crea el mapa y lo centra en Cochabamba, Bolivia
        var mymap = L.map('mapid').setView([-17.40, -66.08], 12);

        // Paso 2: Agrega la capa base de OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mymap);

        // Paso 3: Resaltar la ubicación del Río Rocha con las coordenadas exactas
        var rioRochaCoords = [
           [-17.42711984259424, -65.92525150628823],
           [-17.4201847648595, -65.93627063470565],
           [-17.41452810558945, -65.94971419764931],
           [-17.41268346885685, -65.95640053649551],
           [-17.41277557397619, -65.96611612389088],
           [-17.4073426438893, -65.97660114996067],
           [-17.40400255151106, -65.98359818477461],
           [-17.40721061459624, -65.98981526463947],
           [-17.40474289473471, -66.0002855227831],
           [-17.40194316832323, -66.00836193723035],
           [-17.401655319286, -66.01450223560838],
           [-17.40113485442776, -66.01862995701828],
           [-17.39537851557205, -66.0243104208231],
           [-17.39491064188472, -66.02551524965084],
           [-17.39561990467743, -66.02814077187584],
           [-17.39489971234482, -66.03195847188989],
           [-17.39436076617916, -66.03408427797937],
           [-17.39432286297015, -66.0344749998868],
           [-17.39422361028841, -66.03479732368129],
           [-17.39413106659846, -66.03505441921723],
           [-17.39397391544476, -66.03530675956112],
           [-17.39388477333107, -66.03556208048023],
           [-17.3938455516253, -66.03595380090704],
           [-17.39380549302112, -66.03634606173331],
           [-17.39377947457683, -66.03660721717861],
           [-17.3938790154455, -66.03688041059009],
           [-17.39398091701304, -66.03715128472915],
           [-17.39407340435529, -66.03748979503406],
           [-17.39424422705397, -66.0377629585542],
           [-17.39428265400632, -66.03802859309113],
           [-17.39438806735861, -66.03829689245279],
           [-17.39444024071902, -66.03843139653954],
           [-17.39453762350669, -66.03876581688645],
           [-17.39463687180027, -66.0390383509551],
           [-17.39472781068489, -66.03937729945176],
           [-17.3947655490673, -66.03964305524441],
           [-17.39480328648828, -66.03990877855414],
           [-17.39487690530684, -66.0404416457876],
           [-17.39497207171694, -66.04077711624785],
           [-17.39494344694934, -66.04104016445203],
           [-17.39484760512616, -66.04142079667542],
           [-17.39481999808603, -66.04174258726509],
           [-17.39486067116018, -66.04200544229734],
           [-17.39508956361043, -66.0422846540865],
           [-17.39519784179242, -66.04248888098616],
           [-17.39537484573756, -66.04263384663535],
           [-17.39560863821487, -66.04284866920634],
           [-17.3958315093389, -66.04319148571331],
           [-17.39600550208262, -66.04339765975381],
           [-17.39617263103657, -66.04366897774099],
           [-17.39634014907271, -66.04393911378808],
           [-17.39644354889148, -66.04420613031067],
           [-17.39654130895952, -66.04453640673195],
           [-17.39669401725375, -66.04493691803168],
           [-17.39679750624527, -66.04520255608089],
           [-17.39690399383327, -66.04546513011913],
           [-17.397006570602, -66.04573136793815],
           [-17.39696765574776, -66.04612106705576],
           [-17.39694131692373, -66.04638173481203],
           [-17.39690725552718, -66.04670840663178],
           [-17.39675008473221, -66.04696534212879],
           [-17.39665884882319, -66.04722342848153],
           [-17.39650418915643, -66.04747757361091],
           [-17.39634944067054, -66.04773186304151],
           [-17.39618761034767, -66.04805192542183],
           [-17.39603220034603, -66.04830734026351],
           [-17.39587728073199, -66.04856203385886],
           [-17.39572291897026, -66.04881606914515],
           [-17.39556762163144, -66.04907133445359],
           [-17.39554718120453, -66.04926771954774],
           [-17.39549858876857, -66.04972766533697],
           [-17.39541398380262, -66.04992108117871],
           [-17.39532224293238, -66.05018055427688],
           [-17.39523046071372, -66.05044013967945],
           [-17.39520239301113, -66.05070378844172],
           [-17.39517630878069, -66.05096476008451],
           [-17.39514063013657, -66.05135189811743],
           [-17.39511127449185, -66.051673883551],
           [-17.3951512084925, -66.05193548164621],
           [-17.39532423683888, -66.05214003809085],
           [-17.39549929801656, -66.05234161617345],
           [-17.39573248033283, -66.05261012322246],
           [-17.39590107764523, -66.05287589090631],
           [-17.3960748823422, -66.0530779471074],
           [-17.39630919559838, -66.05328731569745],
           [-17.39655087608187, -66.05342983590452],
           [-17.39672798987607, -66.05357036753644],
           [-17.39702123521722, -66.0538438608332],
           [-17.39720782652552, -66.05391481479485],
           [-17.39830300487684, -66.05515091231084],
           [-17.39852868968561, -66.05543615747511],
           [-17.39876106394925, -66.05565675730506],
           [-17.39899583758363, -66.05594239071627],
           [-17.39923032609392, -66.05622765656554],
           [-17.3992811159455, -66.0563629543377],
           [-17.39937843979591, -66.05663355032567],
           [-17.39945514981398, -66.05709720485341],
           [-17.39947607787146, -66.05749004063904],
           [-17.39957366683115, -66.05776061324944],
           [-17.39954531116677, -66.05801831068183],
           [-17.39951300272987, -66.05834036111204],
           [-17.39948715409233, -66.05859803550045],
           [-17.39939799104441, -66.05884942350059],
           [-17.39922602755179, -66.05928803324684],
           [-17.39907338213401, -66.05953352959492],
           [-17.39878799073561, -66.05983124420004],
           [-17.39864194890121, -66.06001251014571],
           [-17.39836245452529, -66.06024620764238],
           [-17.39807083608801, -66.06060940251314],
           [-17.39790867413687, -66.06085750622688],
           [-17.39776425821287, -66.06110236674651],
           [-17.39761182813579, -66.06134896355999],
           [-17.39746499664518, -66.06153118204702],
           [-17.39737492081052, -66.06178427873014],
           [-17.3972718174396, -66.06216700663532],
           [-17.39717516479934, -66.06248512506762],
           [-17.39716217025393, -66.06261469319378],
           [-17.39711012483721, -66.0631328365975],
           [-17.39709006697517, -66.06332750107887],
           [-17.39706252380527, -66.06358728948136],
           [-17.39682059556656, -66.06408832225604],
           [-17.3965380914219, -66.06432573548393],
           [-17.39626316070181, -66.06449794790467],
           [-17.39611406899862, -66.06474462473767],
           [-17.39596377014588, -66.06499185935529],
           [-17.39586362447586, -66.06531256354984],
           [-17.39581447731008, -66.0657689087128],
           [-17.39571055589376, -66.06615381626639],
           [-17.39554312662204, -66.06653324685421],
           [-17.39545162028465, -66.06678870184277],
           [-17.39517247596946, -66.06696416562018],
           [-17.39488668480655, -66.06720466340236],
           [-17.39460232284195, -66.06744507922922],
           [-17.39438076175875, -66.06769134840332],
           [-17.39429372370921, -66.06794522371504],
           [-17.39426100403449, -66.0683331201845],
           [-17.39436745388326, -66.0685404461837],
           [-17.394591427145, -66.06882549926776],
           [-17.39482607525323, -66.0691042858677],
           [-17.39493023277289, -66.06937380219088],
           [-17.39509286138537, -66.06971264558688],
           [-17.39519685056035, -66.06998174773165],
           [-17.39534826531105, -66.07038802147972],
           [-17.39545037689551, -66.07065797674048],
           [-17.39555278570017, -66.07092751018411],
           [-17.39565545517677, -66.07119655127279],
           [-17.39568882312906, -66.07152507413359],
           [-17.39579145286351, -66.07179373283081],
           [-17.39587587507826, -66.07219649006633],
           [-17.39610026028831, -66.0725387732155],
           [-17.39619651573866, -66.07287195875222],
           [-17.39612071816961, -66.07359062819602],
           [-17.39614225180936, -66.07404673638371],
           [-17.39629136395573, -66.07451161730985],
           [-17.39645807720514, -66.07478288445562],
           [-17.39656511432893, -66.07498703895828],
           [-17.39659598182158, -66.07531623685477],
           [-17.39663281617138, -66.07558095619547],
           [-17.39669163201279, -66.07624175982257],
           [-17.3967349886967, -66.07644142186783],
           [-17.39673186427897, -66.07709716204147],
           [-17.39670095787462, -66.07741973902702],
           [-17.39668197026754, -66.07761415768799],
           [-17.39663020117136, -66.07813352200409],
           [-17.39665997018342, -66.07846393171461],
           [-17.39660758920669, -66.07898394972591],
           [-17.39656802865764, -66.07937458961362],
           [-17.39659545305047, -66.07976456661702],
           [-17.39645465591298, -66.07994513345989],
           [-17.39618101680068, -66.08018161648523],
           [-17.39595846307744, -66.0804372943513],
           [-17.39567130085112, -66.08069030609215],
           [-17.39552753484734, -66.08081697818004],
           [-17.39537242444543, -66.08107183193719],
           [-17.39514290252716, -66.0813927520994],
           [-17.39505308724739, -66.08164999746698],
           [-17.39496355350113, -66.08190653170989],
           [-17.39486087384829, -66.08229376488609],
           [-17.39482223966646, -66.08268412668684],
           [-17.39477173450217, -66.08320405350983],
           [-17.39473430740913, -66.08359309850503],
           [-17.39469688096075, -66.08398211529104],
           [-17.39466569112512, -66.0843062777638],
           [-17.39462827079527, -66.08469524911521],
           [-17.39457112065219, -66.08527975579383],
           [-17.39454543393698, -66.08554008150402],
           [-17.39452618672945, -66.08573530765686],
           [-17.39456368669023, -66.08599983740967],
           [-17.39458835668511, -66.08639447084288],
           [-17.39462687530827, -66.08665764571707],
           [-17.3946660991408, -66.08691949604781],
           [-17.39475021301245, -66.08737898424168],
           [-17.3948513739243, -66.08764637525125],
           [-17.39495249310415, -66.08791366855657],
           [-17.39517744841746, -66.08819236274118],
           [-17.39540574580154, -66.08846544473916],
           [-17.39563477045358, -66.08873664432755],
           [-17.39574920203878, -66.08887214516363],
           [-17.39596769595044, -66.0892685669116],
           [-17.39619402180341, -66.0895428840475],
           [-17.39635710308859, -66.08981365061254],
           [-17.39658327348343, -66.09008740285037],
           [-17.39681231876347, -66.09035548054565],
           [-17.39704048326334, -66.09062445392449],
           [-17.39721137245368, -66.09082604102912],
           [-17.3973634757145, -66.09122079334027],
           [-17.39747716810092, -66.09135519491447],
           [-17.39806726294324, -66.0944392733539],
           [-17.39804181188662, -66.09469780733124],
           [-17.39802018470293, -66.09489435366169],
           [-17.3979630545766, -66.09547521213999],
           [-17.39785548285052, -66.09592328671835],
           [-17.39765928896448, -66.09662613278132],
           [-17.39763388032396, -66.09688443551096],
           [-17.39760265135667, -66.09720649854741],
           [-17.39744332389922, -66.09752395184906],
           [-17.39739839495797, -66.09797675656743],
           [-17.39736629953899, -66.09830021181777],
           [-17.39726383334792, -66.09868574791304],
           [-17.3972300218673, -66.09901179000335],
           [-17.39720354376591, -66.09927308766942],
           [-17.3972415996454, -66.09953456928237],
           [-17.39734229659599, -66.09979919226566],
           [-17.39743604608849, -66.10013004787312],
           [-17.39758693873936, -66.10052755399042],
           [-17.39762579999946, -66.10078745125496],
           [-17.39778996970798, -66.10105458254949],
           [-17.39795400227635, -66.10132149098328],
           [-17.39799783912554, -66.10151833511767],
           [-17.39814904925585, -66.10191372267174],
           [-17.39825029356047, -66.10217662261877],
           [-17.39835256941032, -66.10243675439476],
           [-17.39851109636119, -66.10276470018259],
           [-17.39847847401937, -66.10308851813819],
           [-17.39848206746345, -66.10367519597708],
           [-17.39845555398334, -66.10393512616996],
           [-17.39842903731765, -66.10419510165025],
           [-17.39837490119847, -66.10471739055168],
           [-17.39835076438515, -66.10497316801985],
           [-17.39829227229063, -66.10555572830485],
           [-17.3982661091716, -66.10581517418831],
           [-17.39820724051304, -66.10639904894745],
           [-17.39817452567192, -66.10672349927947],
           [-17.39814834841945, -66.10698309211861],
           [-17.39810921911092, -66.10737230600932],
           [-17.39807704656572, -66.10769571683073],
           [-17.39798932335058, -66.1079501860121],
           [-17.39783830705002, -66.10820313028545],
           [-17.3976872138437, -66.1084562063197],
           [-17.39747879104348, -66.10864381677789],
           [-17.39725182458752, -66.10902390703176],
           [-17.39703692523487, -66.10927604670492],
           [-17.3969474365287, -66.10953458262395],
           [-17.39593468557029, -66.11531910035254],
           [-17.39493061558439, -66.11703148081361],
           [-17.39479016492873, -66.11715503214745],
           [-17.39457931602476, -66.11734050514602],
           [-17.3940970973214, -66.11770342810951],
           [-17.39366449962016, -66.11814465339413],
           [-17.39315544094421, -66.11871181232496],
           [-17.39285983693127, -66.11909070806038],
           [-17.39257701246302, -66.11933932254178],
           [-17.392293706417, -66.11958847290336],
           [-17.3920774007667, -66.11983688633418],
           [-17.3918040913708, -66.12001584061507],
           [-17.39151124633234, -66.12027717820818],
           [-17.39122207698994, -66.12053318803189],
           [-17.39094066483419, -66.12077913121232],
           [-17.39073531282331, -66.12095631778774],
           [-17.39033382418351, -66.12107003731477],
           [-17.38994523126961, -66.12105136180701],
           [-17.38960783415155, -66.12116720747927],
           [-17.38926691190765, -66.12128751530224],
           [-17.38866409866939, -66.1213964686621],
           [-17.38831618400022, -66.12158138545594],
           [-17.38792207759197, -66.12156587845541],
           [-17.38766338877855, -66.12149195066392],
           [-17.38745861054634, -66.12155075293882],
           [-17.38711498909397, -66.12172943249082],
           [-17.38670135024595, -66.12190950134048],
           [-17.3864231551597, -66.12203206692482],
           [-17.38613272470096, -66.1222856310813],
           [-17.3858436466545, -66.12247874610253],
           [-17.38555240393757, -66.12273289833141],
           [-17.38526181809627, -66.12298634385083],
           [-17.38497090099692, -66.12324007523242],
           [-17.38482532037542, -66.12336705332577],
           [-17.38447421539959, -66.12355209466224],
           [-17.38412922966082, -66.12367100642234],
           [-17.38370944354413, -66.12385510432226],
           [-17.38341294713534, -66.12411414246534],
           [-17.38311727108116, -66.12437193281916],
           [-17.38282354931811, -66.12462803734805],
           [-17.382603743618, -66.12481944933648],
           [-17.38231722256033, -66.12500825231611],
           [-17.38202909719014, -66.12519840370321],
           [-17.38168150871481, -66.12537804511496],
           [-17.38130864634666, -66.12558347060195],
           [-17.38108789754144, -66.12577548080796],
           [-17.38037837550325, -66.12664528833299],
           [-17.38029019802313, -66.12689941004521],
           [-17.38012403120446, -66.12728188392322],
           [-17.37996513082909, -66.12759852410869],
           [-17.37973947483305, -66.12797244725502],
           [-17.37951634656993, -66.12828662003913],
           [-17.37936954755455, -66.12847468533784],
           [-17.37909039250969, -66.12871871907446],
           [-17.37888181332352, -66.12890079957533],
           [-17.3786117821903, -66.12907627358821],
           [-17.37827734619759, -66.12924888370719],
           [-17.37793274594226, -66.12943418722956],
           [-17.37764850787348, -66.12968414642947],
           [-17.37723771313683, -66.12992469707243],
           [-17.37696520932377, -66.13004501878326],
           [-17.37662420676947, -66.13022417625299],
           [-17.37634284894241, -66.13046950429398],
           [-17.3762057728897, -66.13058778679502],
           [-17.37599466546963, -66.13077175969681],
           [-17.37571297240494, -66.13101757392286],
           [-17.37542648096768, -66.13126871560706],
           [-17.37514581685031, -66.13151286080254],
           [-17.37485571855163, -66.13176799488186],
           [-17.37471369313775, -66.13189215317455],
           [-17.37449799522095, -66.1320810748376],
           [-17.37428081181982, -66.13227204802645],
           [-17.37399536027296, -66.13252150070601],
           [-17.37370955563913, -66.13277122286605],
           [-17.37343181461392, -66.13301147598166],
           [-17.37317963497339, -66.13327949121425],
           [-17.37315806981279, -66.13353663038552],
           [-17.37313392082043, -66.13379673114027],
           [-17.37322722454223, -66.13407802593697],
           [-17.37337695943321, -66.13437288400046],
           [-17.3735332570244, -66.13466032329815],
           [-17.37370064667858, -66.13493258888454],
           [-17.37391676755261, -66.13522952959062],
           [-17.37415002107247, -66.13544679513424],
           [-17.3742613944367, -66.13564770992959],
           [-17.37448262854308, -66.13605065110492],
           [-17.37470927289866, -66.13633247918325],
           [-17.37493564633559, -66.13667104091439],
           [-17.37516913911168, -66.13694212345457],
           [-17.37526969495089, -66.13721419767968],
           [-17.37543593879579, -66.13748569324883],
           [-17.37553935257847, -66.13780658946021],
           [-17.37576884356098, -66.13813684444379],
           [-17.37748030485887, -66.14411493237183],
           [-17.37985657661442, -66.15473568662289],
           [-17.38279173151107, -66.16177437641966],
           [-17.38969629433606, -66.16511957569369],
           [-17.39291730847663, -66.16649251360468],
           [-17.40137433852266, -66.16854209461432],
           [-17.40636786349014, -66.17156065129613],
           [-17.40994396364522, -66.17476848166976],
           [-17.41179029182532, -66.1783156058579],
           [-17.41293248737975, -66.18147408647164],
           [-17.41431989535973, -66.18264434938325],
           [-17.41846537371153, -66.18574637163704],
           [-17.42174081711041, -66.1885104987729],
           [-17.4256512855537, -66.19247306188626],
           [-17.43001506215531, -66.20339417598751],
           [-17.42926365165903, -66.20910908679389],
           [-17.42965504841917, -66.21353696867921],
           [-17.42672301106785, -66.2179549897796],
           [-17.42062322903149, -66.2223467559471],
           [-17.41704858562368, -66.22493225342576],
           [-17.41549060686797, -66.22783991543304],
           [-17.41547212213641, -66.2280396086356],
           [-17.41551437298808, -66.22831064440115],
           [-17.41567573253867, -66.22872503372578],
           [-17.4158327738934, -66.22920440997939],
           [-17.41600038869752, -66.22955130142994],
           [-17.41610550819928, -66.22982832525241],
           [-17.41621057926511, -66.2301052339599],
           [-17.41625581120232, -66.23031079536472],
           [-17.41619878248659, -66.23084689801097],
           [-17.41616851225863, -66.23111662914732],
           [-17.41612249023096, -66.23158349099708],
           [-17.41607028785819, -66.23211633863893],
           [-17.41602081181409, -66.23264738072943],
           [-17.41593042231469, -66.23290802948631],
           [-17.41569028084704, -66.23329689165378],
           [-17.415377094231, -66.23374828465495],
           [-17.41521699236013, -66.23400761511958],
           [-17.41504383180568, -66.23440053539048],
           [-17.41473696862227, -66.23478574547148],
           [-17.41458360393774, -66.23497841590486],
           [-17.4144171187095, -66.23530477443576],
           [-17.41418357267551, -66.23562753737845],
           [-17.41401052169498, -66.23602095638905],
           [-17.41392408129238, -66.23621767450591],
           [-17.41382751602639, -66.23648473615455],
           [-17.41360483336509, -66.23673702738472],
           [-17.4134347270816, -66.23706704570787],
           [-17.41334608267601, -66.23726587396705],
           [-17.41324936149228, -66.23753296455013],
           [-17.41302314876828, -66.23778870275321],
           [-17.41299142762765, -66.23812253790059],
           [-17.41295065842694, -66.23852588692314],
           [-17.41313883858947, -66.23867035155163],
           [-17.41339433371238, -66.23881775606101],
           [-17.41364362720594, -66.23903138575716],
           [-17.41387883224605, -66.23937883068653],
           [-17.41396672976176, -66.23985352736833],
           [-17.41385589055685, -66.24031618533103],
           [-17.41355544969824, -66.24063765685598],
           [-17.41325039545508, -66.24096332121925],
           [-17.41302778374551, -66.24115659265912],
           [-17.41273373131769, -66.24141119373398],
           [-17.41245832712243, -66.2414655390974],
           [-17.41209412421253, -66.24165900949991],
           [-17.41133054575695, -66.24393099712231],
           [-17.41176777093309, -66.24497909056289],
           [-17.41175454369894, -66.2451133254126],
           [-17.41177453863471, -66.24558853416602],
           [-17.41174251754146, -66.24592338158966],
           [-17.41164859178219, -66.24618710432591],
           [-17.4113516978185, -66.24643751216182],
           [-17.41098437535759, -66.2467483046406],
           [-17.41088281393927, -66.24708017788181],
           [-17.41086296581699, -66.24728191815193],
           [-17.41089129197415, -66.24768959279703],
           [-17.4110002578634, -66.24796701016626],
           [-17.41117010777337, -66.24831573612404],
           [-17.4111380981768, -66.24865045203293],
           [-17.41111863924421, -66.24885175320016],
           [-17.41115835374197, -66.24912536108337],
           [-17.4114014422581, -66.2494109017465],
           [-17.41170574372064, -66.2497668557678],
           [-17.41181301479077, -66.25004393913927],
           [-17.4117718288797, -66.25044724639521],
           [-17.41160990045968, -66.25070804050671],
           [-17.41144776509988, -66.2509686763386],
           [-17.41122001579546, -66.25122468701683],
           [-17.41119575591911, -66.25149123604353],
           [-17.41110225812712, -66.25175548932469],
           [-17.41107685289635, -66.25202310361696],
           [-17.41105084612861, -66.25229146475441],
           [-17.41087884118597, -66.25262252074708],
           [-17.41085329185957, -66.25289044031445],
           [-17.41081748111568, -66.2532901207306],
           [-17.41092105543989, -66.25363156969878],
           [-17.41110291748601, -66.25384409486038],
           [-17.41119743621109, -66.25425388883374],
           [-17.41115847101635, -66.25465557865999],
           [-17.41106498349387, -66.25492002621884],
           [-17.41091040890985, -66.25511427582025],
           [-17.41068812487933, -66.25530535415737],
           [-17.41046579572423, -66.2554965827446],
           [-17.41016226142135, -66.25581941616363],
           [-17.40999253833457, -66.25614933327175],
           [-17.40989085986451, -66.25648285458271],
           [-17.41001313396891, -66.25662366047706],
           [-17.41025619855252, -66.25690581782744],
           [-17.41049898876722, -66.2571881084167],
           [-17.41074175847452, -66.25746964258367],
           [-17.41098465645073, -66.25775029315395],
           [-17.41116804443614, -66.25795949259512],
           [-17.41180536055314, -66.2597669553471],
           [-17.41176803744875, -66.26016695274873],
           [-17.41185438613064, -66.26070816896328],
           [-17.41203130156165, -66.26153572422787],
           [-17.41218588731376, -66.26195435957371],
           [-17.41229301347257, -66.26223064187906],
           [-17.41238684846538, -66.2626403375732],
           [-17.41267073645291, -66.26319417087795],
           [-17.41282316331638, -66.263674987369],
           [-17.41288230441085, -66.26374656664646],
           [-17.41297588944478, -66.26415492269956],
           [-17.41308443512415, -66.26442866470752],
           [-17.41324899542954, -66.26477580808097],
           [-17.41340988163349, -66.26518661821197],
           [-17.41358401843052, -66.265463908699],
           [-17.4138230267615, -66.26574594136896],
           [-17.41406217336999, -66.2660277361469],
           [-17.41436175316309, -66.26637797779055],
           [-17.41460452520903, -66.26659450535246],
           [-17.4148541863043, -66.26674372453431],
           [-17.41524122568765, -66.2668346837966],
           [-17.41405580758909, -66.2667633454106],
           [-17.41432794396715, -66.2667112844087],
           [-17.4140558911198, -66.2681014447067],
           [-17.41442506580691, -66.26905802836339],
           [-17.41444738051263, -66.26946414782937],
           [-17.41454236883106, -66.2705355426057],
           [-17.41462093179522, -66.27174102261148],
           [-17.41482354344744, -66.27235335825439],
           [-17.41504756071245, -66.27276364254693],
           [-17.41515286171335, -66.27303491895364],
           [-17.4153632856291, -66.273577034048],
           [-17.41559955822643, -66.27385386483063],
           [-17.4158352050638, -66.27413084704619],
           [-17.41613062486351, -66.27447493100536],
           [-17.41636572516367, -66.27475120117694],
           [-17.41660371572056, -66.27502317048233],
           [-17.41683988924368, -66.27529616594548],
           [-17.41712263016686, -66.27571163801436],
           [-17.41742198922972, -66.27598869805477],
           [-17.41758468710249, -66.27632603576082],
           [-17.42004650491959, -66.28097301904589],
           [-17.41825352728891, -66.28799519134823],
           [-17.41697355984582, -66.29242401337746],
           [-17.41473537517179, -66.29724281779393],
           [-17.41274897863965, -66.30204177884485],
           [-17.41082967133512, -66.30534517193615],
           [-17.4083559814198, -66.30676238462996],
           [-17.40841492209527, -66.30683350401944],
           [-17.40865204784291, -66.30711641982801],
           [-17.40875078355437, -66.30745770649922],
           [-17.40884879000659, -66.30779979820261],
           [-17.40887644489957, -66.30820254518191],
           [-17.40857311492862, -66.30858789233272],
           [-17.40821622231766, -66.30883714555338],
           [-17.40790927540779, -66.30916724938749],
           [-17.40787995521057, -66.30943791321322],
           [-17.40791299431289, -66.30983499812162],
           [-17.40802361208276, -66.31004432496312],
           [-17.40799834067117, -66.31031017457481],
           [-17.40796647337735, -66.31064287430321],
           [-17.40787610282758, -66.31090379067379],
           [-17.40776431636113, -66.31136737847787],
           [-17.40773414512391, -66.31163890659759],
           [-17.407686405917, -66.31210852142746],
           [-17.40765971016265, -66.31237606607861],
           [-17.40766382079606, -66.31303871294016],
           [-17.40765054036076, -66.31317237628063],
           [-17.40782077844822, -66.31418948730473],
           [-17.40780145367931, -66.31506133669951],
           [-17.40786466184426, -66.31580155048479],
           [-17.40782040477508, -66.3162665978232],
           [-17.40774241108607, -66.31639501012295],
           [-17.40736643752862, -66.31677798369014],
           [-17.40729304346031, -66.31684087272529],
           [-17.40692574172465, -66.31715560856239],
           [-17.40669841656123, -66.31741157840354],
           [-17.40653019563342, -66.31767789241175],
           [-17.40644991486097, -66.31780793847803],
           [-17.40634166988824, -66.31820691649111],
           [-17.40617336416028, -66.31853498856793],
           [-17.4060540295339, -66.31906625389773],
           [-17.4058904128034, -66.31939068099395],
           [-17.40557149263784, -66.31984875989531],
           [-17.40548416927068, -66.32004637042714],
           [-17.40524380092361, -66.320437145079],
           [-17.40514409837248, -66.32076831616777],
           [-17.40511785593044, -66.32103624602171],
           [-17.40509161380206, -66.32130417257829],
           [-17.40505881454427, -66.32163907061833],
           [-17.40498518466752, -66.32170254856221]
        ];

        var rioRocha = L.polyline(rioRochaCoords, {
            color: '#007bff',
            weight: 5,
            opacity: 0.7
        }).addTo(mymap);

        // Paso 4: Define los datos de contaminación por año y mes
        const contaminacionPorAnioYMes = {
            2021: {
                'enero': { 'Puente Siles': 88, 'Punto Chiñata': 4, 'Puente Pelicanos': 40 },
                'febrero': { 'Puente Siles': 88, 'Punto Chiñata': 4, 'Puente Pelicanos': 41 },
                'marzo': { 'Puente Siles': 88, 'Punto Chiñata': 4, 'Puente Pelicanos': 42 },
                'mayo': { 'Puente Siles': 88, 'Punto Chiñata': 4, 'Puente Pelicanos': 45 },
                'junio': { 'Puente Siles': 88, 'Punto Chiñata': 4, 'Puente Pelicanos': 33 },
            },
            2023: {
                'enero': { 'Puente Siles': 22, 'Punto Chiñata': 8, 'Puente Pelicanos': 80 },
                'febrero': { 'Puente Siles': 22, 'Punto Chiñata': 8, 'Puente Pelicanos': 44 },
                'marzo': { 'Puente Siles': 22, 'Punto Chiñata': 8, 'Puente Pelicanos': 43 },
                'abril': { 'Puente Siles': 22, 'Punto Chiñata': 8, 'Puente Pelicanos': 55 },
                'mayo': { 'Puente Siles': 22, 'Punto Chiñata': 8, 'Puente Pelicanos': 66 },
            },
            2024: {
                'enero': { 'Puente Siles': 44, 'Punto Chiñata': 3, 'Puente Pelicanos': 33 },
                'mayo': { 'Puente Siles': 44, 'Punto Chiñata': 3, 'Puente Pelicanos': 44 },
                'julio': { 'Puente Siles': 44, 'Punto Chiñata': 3, 'Puente Pelicanos': 34 },
                'noviembre': { 'Puente Siles': 44, 'Punto Chiñata': 3, 'Puente Pelicanos': 88 },
            }
        };

        // Paso 5: Crea y almacena los marcadores
        var silesMarker = L.marker([-17.422382, -66.024038]).addTo(mymap);
        var chinataMarker = L.marker([-17.408515, -65.992970]).addTo(mymap);
        var pelicanosMarker = L.marker([-17.396697, -66.063679]).addTo(mymap);

        // Paso 6: Función para actualizar los popups de los marcadores
        function actualizarPopups(anio, mes) {
            const dataAnual = contaminacionPorAnioYMes[anio];
            const dataMensual = dataAnual ? dataAnual[mes] : null;

            if (dataMensual) {
                silesMarker.bindPopup(`<b>Puente Siles</b><br>Carga Contaminante: ${dataMensual['Puente Siles']}`).openPopup();
                chinataMarker.bindPopup(`<b>Punto Chiñata</b><br>Carga Contaminante: ${dataMensual['Punto Chiñata']}`);
                pelicanosMarker.bindPopup(`<b>Puente Pelicanos</b><br>Carga Contaminante: ${dataMensual['Puente Pelicanos']}`);
            } else {
                silesMarker.bindPopup("<b>Puente Siles</b><br>Datos no disponibles para este mes.").openPopup();
                chinataMarker.bindPopup("<b>Punto Chiñata</b><br>Datos no disponibles para este mes.");
                pelicanosMarker.bindPopup("<b>Puente Pelicanos</b><br>Datos no disponibles para este mes.");
            }

            document.querySelectorAll('#month-controls button').forEach(btn => btn.classList.remove('active'));
            if (mes) {
                document.getElementById('btn' + mes).classList.add('active');
            }
        }

        // Paso 7: Función para generar los botones de los meses
        function generarBotonesMes(anio) {
            const monthControls = document.getElementById('month-controls');
            monthControls.innerHTML = '';

            const meses = Object.keys(contaminacionPorAnioYMes[anio]);

            meses.forEach((mes, index) => {
                const btn = document.createElement('button');
                btn.id = 'btn' + mes;
                btn.textContent = mes.charAt(0).toUpperCase() + mes.slice(1);
                
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#year-controls button').forEach(b => b.classList.remove('active'));
                    document.getElementById('btn' + anio).classList.add('active');
                    actualizarPopups(anio, mes);
                });
                
                monthControls.appendChild(btn);

                if (index === 0) {
                    btn.classList.add('active');
                    actualizarPopups(anio, mes);
                }
            });
        }

        // Paso 8: Eventos de clic para los botones de los años
        document.getElementById('btn2021').addEventListener('click', () => {
            document.querySelectorAll('#year-controls button').forEach(b => b.classList.remove('active'));
            document.getElementById('btn2021').classList.add('active');
            generarBotonesMes(2021);
        });
        document.getElementById('btn2023').addEventListener('click', () => {
            document.querySelectorAll('#year-controls button').forEach(b => b.classList.remove('active'));
            document.getElementById('btn2023').classList.add('active');
            generarBotonesMes(2023);
        });
        document.getElementById('btn2024').addEventListener('click', () => {
            document.querySelectorAll('#year-controls button').forEach(b => b.classList.remove('active'));
            document.getElementById('btn2024').classList.add('active');
            generarBotonesMes(2024);
        });

        // Inicializa el mapa con los datos del primer año y mes
        generarBotonesMes(2021);
    </script>
</body>
</html>